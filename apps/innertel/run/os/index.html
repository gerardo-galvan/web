<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>INNERTEL | Terminal</title>
  <style>
    body {
      background-color: black;
      color: #00FF00;
      font-family: Inconsolata, monospace, "Courier New", Courier ;
      padding: 40px;
    }
    @font-face {
      src: url("../../fonts/MIB.ttf");
      font-family: MIB;
    }
    @font-face {
      src: url("../../fonts/Inconsolata.ttf");
      font-family: Inconsolata;
    }
    h1 {
      font-family:  MIB;
      color: lime;
    }
    .console-box {
      border: 1px solid #00FF00;
      padding: 10px;
      box-shadow: 0 0 15px #00FF00;
      margin-top: 20px;
      border-radius: 10px;
    }
    #output {
      display: none;
      white-space: pre-wrap;
      margin-top: 10px;
      min-height: 200px;
      max-height: 400px;
      overflow-y: auto;
    }
    #output::-webkit-scrollbar {
      width: 12px;
    }
    #output::-webkit-scrollbar-track {
      background: black;
    }
    #output::-webkit-scrollbar-thumb {
      background-color: #00FF00;
      border-radius: 0px;
      border: 1px solid black;
    }
    #output::-webkit-scrollbar-button:single-button {
      background-color: #00FF00;
      height: 10px;
    }
    #output::-webkit-scrollbar-button:single-button:vertical:decrement {
      border-bottom: 1px solid black;
    }
    #output::-webkit-scrollbar-button:single-button:vertical:increment {
      border-top: 1px solid black;
    }
    #prompt-line {
      display: flex;
      align-items: center;
      margin-bottom: 10px;
    }
    #prompt-label {
      margin-right: 5px;
      color: #00FF00;
    }
    #commandInput {
      background-color: black;
      color: #00FF00;
      border: none;
      outline: none;
      width: 100%;
      font-size: 1em;
      font-family: inherit;
    }
    .cmd { color: #00FF00; }
    .links { color:#00BFFF; }
    .resp { color: #83FF08; }
    .error { color: #FF5555; }
    .info { color: #636363; }
  </style>
</head>
<body>
  <h1>INNERTEL terminal</h1>
  <div class="console-box"> 
    <p class="info" id="greeting"></p>
    <p class="info">System Status: <strong>ONLINE</strong></p>
    <p class="info">Last Online: <script>
      document.write(new Date().toLocaleString());
      const greetingEl = document.getElementById('greeting');
      const baseVisitors = 10000;
      const dailyRange = Math.floor(Math.random() * 9000) + 1000;
      const timestampSeed = new Date().setHours(0, 0, 0, 0);
      const todayOffset = timestampSeed % dailyRange;
      const visitorId = baseVisitors + todayOffset;
      greetingEl.innerHTML = `Greetings, user #<strong>${visitorId}</strong>!`;
    </script></p>
    <div id="output"></div>
    <div id="prompt-line">
      <span id="prompt-label">innertel$</span>
      <input type="text" id="commandInput" autocomplete="off" autofocus onkeydown="handleCommand(event)">
    </div>
  </div>

  <script>
    const output = document.getElementById('output');
    const input = document.getElementById('commandInput');
    const history = [];
    let historyIndex = -1;
    let helpMode = false;
    const linkMap = {
      '1': 'https://inner.tel/archive/images',
      '2': 'https://inner.tel/archive/videos'
    };

    function handleCommand(event) {
      if (event.key === 'Enter') {
        const command = input.value.trim();
        input.value = '';

        if (helpMode && command.length === 1) {
          helpMode = false;
          handleHelpCategory(command.toLowerCase());
          return;
        }

        if (command !== '') {
          history.push(command);
          historyIndex = history.length;
          appendToOutput(`$${command}`, 'cmd');
          simulateHackingAnimation(() => processCommand(command));
        }
      } else if (event.key === 'ArrowUp') {
        if (historyIndex > 0) {
          historyIndex--;
          input.value = history[historyIndex];
        }
        event.preventDefault();
      } else if (event.key === 'ArrowDown') {
        if (historyIndex < history.length - 1) {
          historyIndex++;
          input.value = history[historyIndex];
        } else {
          historyIndex = history.length;
          input.value = '';
        }
        event.preventDefault();
      }
    }

    function appendToOutput(text, className = 'resp') {
      output.style.display = 'block';
      const line = document.createElement('div');
      line.className = className;
      line.innerText = text;
      output.appendChild(line);
      output.scrollTop = output.scrollHeight;
    }

    function simulateHackingAnimation(callback) {
      const anim = ['|', '/', '-', '\\'];
      let i = 0;
      const spinner = setInterval(() => {
        input.placeholder = 'Processing ' + anim[i++ % anim.length];
      }, 100);
      setTimeout(() => {
        clearInterval(spinner);
        input.placeholder = 'Type "help" for a list of commands...';
        callback();
      }, 600);
    }

    function processCommand(cmd) {
      const parts = cmd.split(' ');
      const base = parts[0].toLowerCase();
      const arg = parts[1];
      let response = '';
      let className = 'resp';

      switch (base) {
        case 'encrypt': {
          const text = cmd.slice(8).trim();
          if (!text) {
            response = 'Usage: encrypt <text>';
            className = 'error';
          } else {
            const encoded = btoa(text);
            response = `Encrypted: ${encoded}`;
          }
          break;
        }
        case 'decrypt': {
          const encoded = cmd.slice(8).trim();
          if (!encoded) {
            response = 'Usage: decrypt <encoded_text>';
            className = 'error';
          } else {
            try {
              const decoded = atob(encoded);
              response = `Decrypted: ${decoded}`;
            } catch (e) {
              response = 'Decryption failed: Invalid encoded text.';
              className = 'error';
            }
          }
          break;
        }
        case 'search': {
          const searchTerm = cmd.slice(cmd.indexOf(' ') + 1).trim();
          if (searchTerm) {
            const searchUrl = `https://inner.tel/search.html#gsc.tab=0&gsc.q=${encodeURIComponent(searchTerm)}`;
            window.open(searchUrl, '_blank');
            response = `Searching for '${searchTerm}'...`;
          } else {
            response = 'Please provide a search term.';
            className = 'error';
          }
          break;
        }
        case 'help':
          helpMode = true;
          response = [
            'INNERTEL Help System — v1.0 — terminal@innertel',
            '',
            '[a] Core Utilities             [b] Web & Lookup Tools',
            '[c] File & Directory Commands [d] Network & Links',
            '[e] Fun, Encode & Extras      [q] Exit Help',
            '',
            'Your Choice?'
          ].join('\n');
          break;
        case 'clear':
          output.innerHTML = '';
          output.style.display = 'none';
          return;
        case 'exit':
          window.location.replace('/');
          return;
        case 'links': {
          response = 'Available links:\n[1] /archive/images  (Images)\n[2] /archive/videos  (Videos)';
          break;
        }
        case 'open': {
          let url = linkMap[arg] || arg;
          if (!url.startsWith('http')) {
            url = 'https://' + url;
          }
          try {
            const parsed = new URL(url);
            const allowedDomains = ['inner.tel', 'inner.tel/'];
            if (allowedDomains.some(domain => parsed.hostname.includes(domain))) {
              window.open(parsed.href, '_blank');
              response = `Opening ${parsed.href}...`;
            } else {
              response = `Access to ${parsed.hostname} is not permitted.`;
              className = 'error';
            }
          } catch (e) {
            response = 'Invalid URL format or unknown shortcut.';
            className = 'error';
          }
          break;
        }
        default:
          response = `Unknown command: ${cmd}`;
          className = 'error';
      }
      appendToOutput(response, className);
    }

    function handleHelpCategory(choice) {
      let message = '';
      switch (choice) {
        case 'a':
          message = [
            '[a] Core Utilities',
            ' help      — List commands',
            ' clear     — Clear console',
            ' exit      — Exit terminal',
            ' info      — Display system info',
            ' whoami    — Identity check'
          ].join('\n');
          break;
        case 'b':
          message = [
            '[b] Web & Lookup Tools',
            ' search <query>    — Search the web',
            ' define <word>     — Dictionary lookup',
            ' horoscope <sign>  — Daily horoscope',
            ' vin <VIN>         — Vehicle lookup',
            ' joke              — Random joke',
            ' fact              — Fun fact'
          ].join('\n');
          break;
        case 'c':
          message = [
            '[c] File & Directory Commands',
            ' ls                — List current directory',
            ' cd <dir>          — Change directory',
            ' cat <file>        — Show file content',
            ' auth <password>   — Authenticate access'
          ].join('\n');
          break;
        case 'd':
          message = [
            '[d] Network & Links',
            ' ping <host>       — Simulate network ping',
            ' links             — Show link shortcuts',
            ' open <#|url>      — Open links externally'
          ].join('\n');
          break;
        case 'e':
          message = [
            '[e] Fun, Encode & Extras',
            ' encrypt <text>    — Base64 encode',
            ' decrypt <text>    — Base64 decode'
          ].join('\n');
          break;
        case 'q':
          appendToOutput('Exited Help Menu.', 'info');
          return;
        default:
          message = 'Unknown selection. Type "help" to try again.';
      }
      appendToOutput(message, 'resp');
    }
  </script>
</body>
</html>
